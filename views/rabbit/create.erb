<% content_for :supertitle do %>
    Rabbit
<% end %>
<% content_for :title do %>
    Create Job
<% end %>
<form action="/rabbit/create" method="post">
    <fieldset>
        <legend>Queue Details</legend>

        <p><label for="server">â˜ï¸ Queue URL:</label></p>
        <p><input name="server" maxlength="200" size="90" type="text" placeholder="URL"></p>

        <p><label for="username">ğŸ”‘ Credentials:</label></p>
        <% if form.failed_on?(:user_name) || form.failed_on?(:password) %>
            <p class="error">âš ï¸ Credentials are required</p>
        <% end %>
        <p>
            <input name="username" type="text" placeholder="Username" maxlength="100" size="25">
            <input name="password" type="password" placeholder="Password" maxlength="100" size="25">
        </p>
    </fieldset>
    <fieldset>
        <legend>Job Details</legend>

        <p><label for="surveyType">ğŸ“ˆ Survey:</label></p>
        <% if form.failed_on?(:surveyType, :present) %>
            <p class="error">âš ï¸ A survey type must be specified!</p>
        <% end %>
        <p><select name="surveyType">
            <option value="CCS">Census - CCS</option>
            <option value="HH">Census - HH</option>
            <option value="LMS">Census - LMS</option>
            <option value="GFF" selected>Social Survey - GFF</option>
            <option value="LFS">Social Survey - LFS</option>
        </select></p>

        <p><label for="world">ğŸŒ World:</label></p>
        <p>
            <input type="radio" name="world" value="Default" checked> Manual (Default)
            <input type="radio" name="world" value="MOD WORLD"> Mendel Engine
        </p>

        <div id="input_resNo_single">
            <p><label for="resNo">ğŸ‘¥ Resource number:</label></p>
            <% if form.failed_on?(:resNo, :present) %>
                <p class="error">âš ï¸ Resource number is a required field</p>
            <% end %>
            <p><input name="resNo" maxlength="5" size="50" type="text" placeholder="Resource number"></p>
        </div>

        <p><label for="id_input">ğŸ‘¥ Job Identity:</label></p>
        <% if form.failed_on?(:id) %>
            <p class="error">âš ï¸ Fail!</p>
        <% end %>
        <p class="selector">
            <input type="radio" name="idKind" value="single" id="radio_id_single" checked />
            <label for="radio_id_single">Single</label>

            <input type="radio" name="idKind" value="list" id="radio_id_list" />
            <label for="radio_id_list">List</label>

            <input type="radio" name="idKind" value="incr" id="radio_id_incr" />
            <label for="radio_id_incr">Incremental</label>

            <input type="radio" name="idKind" value="rand" id="radio_id_rand" />
            <label for="radio_id_rand">Random</label>
        </p>
        <p id="input_id_single">
            <input id="id_input" name="id" maxlength="100" size="50" type="text" placeholder="Job ID">
        </p>
        <p id="input_id_list" hidden>
            <input id="id_input" name="idList" maxlength="100" size="50" type="text" placeholder="Job ID list, comma-seperated">
        </p>
        <p id="input_id_incr" hidden>
            <input id="id_input" name="idIncrStart" maxlength="100" size="50" type="text" placeholder="Starting ID">
        </p>
        <p id="input_id_rand" hidden />

        <div id="input_dueDate_single">
            <p><label for="dueDate">ğŸ‘¥ Due Date:</label></p>
            <% if form.failed_on?(:dueDate) %>
                <p class="error">âš ï¸ Fail!</p>
            <% end %>
            <p><input name="dueDate" maxlength="100" size="50" type="text" placeholder="Due date"></p>
        </div>

        <div id="input_addr_single">
            <p><label for="addr">ğŸ‘¥ Address:</label></p>
            <% if form.failed_on?(:addr) %>
                <p class="error">âš ï¸ Fail!</p>
            <% end %>
            <p><input name="addr" maxlength="100" size="50" type="text" placeholder="Address"></p>
        </div>

        <p><label for="additionalProperties">ğŸ‘¥ Additional Properties:</label></p>
        <% if form.failed_on?(:additionalProperties) %>
            <p class="error">âš ï¸ Fail!</p>
        <% end %>
        <p><input name="additionalProperties" maxlength="100" size="50" type="text" placeholder="Additional properties"></p>

        <p><label for="count">ğŸš Job count:</label></p>
        <% if form.failed_on?(:job_count, :present) %>
            <p class="error">âš ï¸ Jobs count is a required field</p>
        <% end %>
        <% if form.failed_on?(:job_count, :uint) %>
            <p class="error">âš ï¸ Jobs count must be a non-negative number</p>
        <% end %>
        <p>
            <input name="count" type="text" placeholder="1-100" maxlength="3" size="5">
        </p>

        <p><label for="location">ğŸ‡¬ğŸ‡§ Location:</label></p>
        <p>
            <select name="location">
                <option value="north">North</option>
                <option value="east">East</option>
                <option value="south">South</option>
                <option value="west">West</option>
            </select>
            <input type="submit" value="Send jobs">
        </p>

        <% if (form.failed_on?(:idKind) ||
               form.failed_on?(:resNoKind) ||
               form.failed_on?(:dueDateKind) ||
               form.failed_on?(:addrKind)) %>
            <p class="error">âš ï¸ Error in hidden fields</p>
        <% end %>
        <input name="resNoKind" type="hidden" value="single">
        <input name="dueDateKind" type="hidden" value="set">
        <input name="addrKind" type="hidden" value="single">
    </fieldset>
</form>
